<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Intro to Shiny</title>
    <meta charset="utf-8" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/default-fonts.css" rel="stylesheet" />
    <link href="libs/tile-view/tile-view.css" rel="stylesheet" />
    <script src="libs/tile-view/tile-view.js"></script>
    <link href="libs/panelset/panelset.css" rel="stylesheet" />
    <script src="libs/panelset/panelset.js"></script>
    <link href="libs/tachyons/tachyons.min.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Intro to Shiny
## R Learning Series for PSRC

---






# An R Framework

Build a web application using premade tools

![](images/slide-images/frameworks.png)

---

### Shiny in the Wild

.panelset[

.panel[.panel-name[App 1]
&lt;iframe width="100%" height="400" src="https://jennadallen.shinyapps.io/pet-records-app/?_ga=2.129876812.1380069351.1614316913-2023337461.1608142979" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen&gt;&lt;/iframe&gt;

Source: [Jenna Allen, An App to Visualize and Share My Dogs' Medical History](https://jennadallen.shinyapps.io/pet-records-app/?_ga=2.129876812.1380069351.1614316913-2023337461.1608142979)
]

.panel[.panel-name[App 2]

&lt;iframe width="100%" height="400" src="https://phillyo.shinyapps.io/intelligentsia/?_ga=2.126665933.1380069351.1614316913-2023337461.1608142979" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen&gt;&lt;/iframe&gt;

Source: [Philipp Reiner, Identifying real estate investment opportunities](https://phillyo.shinyapps.io/intelligentsia/?_ga=2.126665933.1380069351.1614316913-2023337461.1608142979)
]

]

---

class: inverse, center, middle

# Running an app

## A high level view

---

class: center, middle

### When our app is deployed, a shiny server is our web server

![](images/slide-images/Slide2.SVG)

---

class: center, middle

### When running an app locally, our computer is the web server

![](images/slide-images/Slide1.SVG)


---

# Shiny Structure


![](images/nantasenamat-ui-server.png)

Image source: [Build Your First Shiny App in R, Chanin Nantasenamat towardsdatascience.com](https://towardsdatascience.com/build-your-first-shiny-web-app-in-r-72f9538f9868)



---

class: inverse, center, middle

# The UI

---

# Outputs

![](images/slide-images/outputs.png)
---

## App

&lt;img src="images/pre-input-app.png" width="500" height="450" style="display: block; margin: auto;" /&gt;


---

# Inputs

![](images/slide-images/inputs.png)

---

# Layout

&lt;img src="images/layout.png" width="500" height="450" style="display: block; margin: auto;" /&gt;

---

class: inverse, center, middle

# Reactivity

## The Building Blocks

---

## Reactive Programming

.middle[

.bg-washed-yellow.b--gold.ba.bw2.br3.shadow-5.ph4.mt5[...a style of programming that focuses on values that change over time, and calculations and actions that depend on those values...We want outputs to stay in sync with inputs, while ensuring that we never do more work than necessary.

.tr.right[--Hadley Wickham, *Mastering Shiny*]

]]

--

.bg-washed-green.b--green.ba.bw2.br3.shadow-5.ph4.mt5.flex.justify-around[

.div[
`reactive({})`

`observe({})`
]

.div[
`eventReactive({})`

`observeEvent({})`
]

]

---

### Reactives


```r
a_name &lt;- reactive({
  # do stuff
})
```

- a conduit between reactive source and endpoint

![](images/slide-images/reactive.png)

---

### Reactives

- can access other reactive values


```r
a_name &lt;- reactive({
  # do stuff
})

another_name &lt;- reactive({
  # do more stuff with a_name
  a_name() 
})
```

--

- returns a value (e.g. data frame, list, etc. )

--

- help avoid repetition

--

- decompose large complex code into smaller pieces

--

- returned value is cached until a reactive dependency is changed 

---

.pull-left[
## Reactives üí§


```r
a_name &lt;- reactive({
  # do stuff
})
```


- named

- very lazy

- called upon to do stuff

- returns a value


]

.pull-right[
## Observers üí®


```r
observe({
  # do stuff right away
})
```

- not named

- very eager

- will react even when it doesn't have reactive dependents

- creates a side-effect


]
---

### Side-effects

Instead of storing the end-result in an R object, the end-result is some interaction with the 'external' world.

- üíæ writing, saving, downloading a file to disk

- ‚úÇÔ∏è copying &amp; üìã pasting files

- updating a database or web API

- üéö updating values of input widgets

---

class: inverse, center, middle

# Reactivity

## Delaying Reactions

---

### Delay a reactive

.panelset[

.panel[.panel-name[Graph]
![](images/slide-images/event-reactive.png)
]

.panel[.panel-name[Events]

```r
a_name &lt;- eventReactive(input$action_button, {
  # do stuff when button is clicked
})
```


```r
a_name &lt;- eventReactive(input$checkbox %in% c(1, 2), {
  # do stuff when boxes 1 or 2 are checked
})
```
]

]

---

### Delay an observer

.panelset[

.panel[.panel-name[Graph]
![](images/slide-images/observe-event.png)
]

.panel[.panel-name[Events]

```r
observeEvent(input$action_button, {
  # do side-effect when button is clicked
})
```


```r
observeEvent(input$checkbox %in% c(1, 2), {
  # do side-effect when boxes 1 or 2 are checked
})
```
]

]

---

class: inverse, center, middle

# Styling

&lt;iframe src="https://giphy.com/embed/yYSSBtDgbbRzq" width="480" height="360" frameBorder="0" class="giphy-embed" allowFullScreen&gt;&lt;/iframe&gt;&lt;p&gt;&lt;a href="https://giphy.com/gifs/frustrated-annoyed-programming-yYSSBtDgbbRzq"&gt;Cascading Style Sheets&lt;/a&gt;&lt;/p&gt;

---

## Bootstrap

.pull-left[
- Default styling for Shiny

- A CSS framework for designing the UI

  - Reusable code combining HTML, CSS, and JS
  
  - Preset design (font-family, boldness, padding, etc.)
  
  - Creates responsive websites

]

.pull-right[
&lt;iframe src="https://shiny.rstudio.com/gallery/widget-gallery.html" width="480" height="360" frameBorder="0" allowFullScreen&gt;&lt;/iframe&gt;
]

---

class: center, middle

Using CSS to overwrite Bootstrap = working with tangled üß∂

&lt;iframe src="https://giphy.com/embed/XbmdBop1Fn6J3dT6U6" width="200" height="200" frameBorder="0" class="giphy-embed" allowFullScreen&gt;&lt;/iframe&gt;&lt;p&gt;&lt;a href="https://giphy.com/gifs/cat-crazy-blue-XbmdBop1Fn6J3dT6U6"&gt;&lt;/a&gt;&lt;/p&gt;


---

# shinyapps.io

## Create a login

You'll be asked to create an account name which is just the prefix of your future url. You can change this later in `Settings`

## Deleting an account
- the only way is by contacting support@rstudio.com
- [https://community.rstudio.com/t/delete-account-shinyapps-io/22692](https://community.rstudio.com/t/delete-account-shinyapps-io/22692)










    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
